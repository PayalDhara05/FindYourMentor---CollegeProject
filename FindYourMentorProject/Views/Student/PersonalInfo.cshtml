@model FindYourMentorProject.Models.RegisterStudent

@{
    ViewBag.Title = "PersonalInfo";
    Layout = "~/Views/Shared/_StudentLayout.cshtml";
}

<h2>PersonalInfo</h2>

<table border="1" cellpadding="10">
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    <tr>
        <td>Username</td>
        <td><div id="Username" contenteditable="true">@Model.Username</div></td>
    </tr>
    <tr>
        <td nowrap>Email Id :</td>
        <td>
            <div id="EmailID">
                @Model.EmailID
            </div>
        </td>
    </tr>
    <tr>
        <td>Role :</td>
        <td>
            <div id="role">
                @Model.Role
            </div>
        </td>
    </tr>
    <tr>
        <td>State:</td>
        <td>
            <div id="state" contenteditable="true">
                @Model.State
                @Html.ValidationMessageFor(model => model.State, "", new { @class = "text-danger" })
            </div>
        </td>
    </tr>

    <tr>
        <td>Pincode :</td>
        <td>
            <div id="pincode" contenteditable="true">
                @Model.Pincode
                @Html.ValidationMessageFor(model => model.Pincode, "", new { @class = "text-danger" })
            </div>
        </td>
    </tr>

    <tr>
        <td>Description :</td>
        <td>
            <div id="desc" contenteditable="true">
                @Model.Description
            </div>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <input id="save" type="button" value="Save" />
        </td>
    </tr>
</table>
<br />
<span id="msg"></span>

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script>
    $(document).ready(function () {

        alert('jQuery Load.If this message box shows it means jQuery is correctly referenced and can be used on this page');

        $("#save").prop("disabled", true);

        $("div").on('input', function () {
            $("#save").prop("disabled", false);
        });

        $("#save").click(function () {
            var modifiedEmployee = {}
            modifiedEmployee.Username = $("#Username").text();
            modifiedEmployee.EmailID = $("#EmailID").text();
            modifiedEmployee.State = $("#state").text();
            modifiedEmployee.Pincode = $("#pincode").text();
            modifiedEmployee.Description = $("#desc").text();

            $.post("/Student/UpdatePersonalInfo", modifiedEmployee, function (msg) {
                $("#save").prop("disabled", true);
                $("#msg").html("<strong>" + msg + "</strong>");
            });

        });
    });
</script>